{% extends "nowstock.html" %}

{% block content2 %}
    <head>

    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', '종가',],
          {% for val in var %}
              ['{{ val.0 }}', {{ val.1 }}],
            {% endfor %}
        ]);

        var options = {
          title: '{{ corp_name }}',
          titlePosition: 'center',
          colors: ['red'],
          lineWidth: 4,
          curveType: 'function',
          legend: 'none',
          pointSize: 5,



        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>

    </head>
       <div class="container">
    <div class="row">
        <div class ="mt-1" >
    <form method="post" action = "{% url 'test2' %}">
        {% csrf_token %}
        <button class="btn btn-outline-light" style ="font-family: 'Noto Sans KR', sans-serif;font-size : 20px;color:black;background-color:lightgreen;" type="submit" name="fav" id="fav" value="{{ corp_name }}">관심등록</button>

    </form>

    <div id="curve_chart" style="height: 500px; align-content: center;"></div>
        </div>
    </div>

    <!--재무제표-->
    <div class="row">

    <div class ="col bg-white text-center mt-1"  id="ifrs_room">
        <mark class=" bg-transparent mt-1 text-center" style="font-family: 'Noto Sans KR', sans-serif;font-size : 50px;"><b>재무제표</b></mark>

                      {{ ifrs|safe }}

    <!---------->
    </div>
    </div>
       <div>
           <table>
               <tbody>
               <tr>
                   <th rowspan="2">날짜</th>
                   <th rowspan="2">종가</th>
                   <th rowspan="2">전일비</th>
                   <th rowspan="2">등락률</th>
                   <th rowspan="2">거래량</th>
                   <th >기관</th>
                   <th colspan="3">외국인</th>
               </tr>
               <tr>
                   <th>순매매량</th>
                   <th>순매매량</th>
                   <th>보유주수</th>
                   <th>보유율</th>
               </tr>
               {% for data in invest %}
               <tr>
                   <th>{{ data.0 }}</th>
                   <th>{{ data.1 }}</th>
                   {% if data.3.0 == "+" %}
                   <th style="color:red;">+{{ data.2 }}</th>
                   <th style="color:red;">{{ data.3 }}</th>
                   {% elif data.3.0 == "-" %}
                   <th style="color:blue;'">-{{ data.2 }}</th>
                   <th style="color:blue">{{ data.3 }}</th>
                   {% endif %}
                   <th>{{ data.4 }}</th>
                   {% if data.5.0 == "+" %}
                   <th style="color:red;">{{ data.5 }}</th>
                   {% elif data.5.0 == "-" %}
                   <th style="color:blue;">{{ data.5 }}</th>
                   {% endif %}
                   {% if data.6.0 == "+" %}
                   <th style="color:red;">{{ data.6 }}</th>
                   {% elif data.6.0 == "-" %}
                   <th style="color:blue;">{{ data.6 }}</th>
                   {% endif %}
                   <th>{{ data.7 }}</th>
                   <th>{{ data.8 }}</th>
               </tr>
               {% endfor %}
               </tbody>
           </table>
       </div>
    </div>
{% endblock %}

