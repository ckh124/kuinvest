{% extends "nowstock.html" %}

{% block content2 %}
    <head>

    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', '종가',],
          {% for val in var %}
              ['{{ val.0 }}', {{ val.1 }}],
            {% endfor %}
        ]);

        var options = {
          title: '{{ corp_name }}',
          titlePosition: 'center',
          colors: ['red'],
          lineWidth: 4,
          curveType: 'function',
          legend: 'none',
          pointSize: 5,



        };

        var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

        chart.draw(data, options);
      }
    </script>

    </head>
       <div class="container">
    <div class="row">
        <div>
    {% for text in summary %}
        <p>{{ text }}</p>
    {% endfor %}
    </div>
        <div class ="mt-1" >
    <form method="post" action = "{% url 'test2' %}">
        {% csrf_token %}
        <button class="btn btn-outline-light" style ="font-family: 'Noto Sans KR', sans-serif;font-size : 20px;color:black;background-color:lightgreen;" type="submit" name="fav" id="fav" value="{{ corp_name }}">관심등록</button>

    </form>

    <div id="curve_chart" style="height: 500px; align-content: center;"></div>
        </div>
    </div>
        <a class="btn btn-outline-light" style ="font-family: 'Noto Sans KR', sans-serif;font-size : 20px;color:black;background-color:lightgreen;" href="{% url 'FS' %}" role="button">재무제표</a>
        <a class="btn btn-outline-light" style ="font-family: 'Noto Sans KR', sans-serif;font-size : 20px;color:black;background-color:lightgreen;" href="{% url 'investor' %}" role="button">투자자</a>




<div class ="col-md-6 bg-white text-center mt-1" >



    <table class="table table-hover table-responsive bg-transparent">
    <thead>
        <th style=" font-family: 'Noto Sans KR', sans-serif;font-size : 25px;"> {{ corp_name }} 관련 기사</th>
    </thead>
    <tbody>
    {% for key, value in snews.items %}
        <tr>
            <td style=" font-family: 'Noto Sans KR', sans-serif;font-size : 16px;" ><a href = "{{ value }}" style="text-decoration-line: none;">{{ key }} </a></td>
        </tr>
        {% endfor %}
    </tbody>
    </table>
</div>

       <div>
       {% if avg %}
    <table class="table table-hover table-responsive bg-transparent">
    <thead>
        <th style=" font-family: 'Noto Sans KR', sans-serif;font-size : 25px;"> 증권사별 적정주가 & 투자의견 </th>
    </thead>
    <tbody>
    <tr>
        <th rowspan="2"> 추정기관 </th>
        <th rowspan="2"> 추정날짜 </th>
        <th colspan="3"> 적정주가 </th>
        <th colspan="2"> 투자의견 </th>
    </tr>
    <tr>
        <th> 적정주가 </th>
        <th> 직전 적정주가 </th>
        <th> 증감율 </th>
        <th> 투자의견 </th>
        <th> 직전 투자의견 </th>
    </tr>
    {% if avg %}
        <tr>
            <td>Consensus</td>
            <td> &nbsp; </td>
            <td>{{ avg.0 }}</td>
            <td>{{ avg.1 }}</td>
            <td>{{ avg.2 }}</td>
            <td>{{ avg.3 }}</td>
            <td>{{ avg.4 }}</td>
        </tr>
    {% endif %}
    {% if inv %}
    {% for items in inv.items %}
        <tr>
            <td>{{ items.1.0 }}</td>
            <td>{{ items.1.1 }}</td>
            <td>{{ items.1.2 }}</td>
            <td>{{ items.1.3 }}</td>
            <td>{{ items.1.4 }}</td>
            <td>{{ items.1.5 }}</td>
            <td>{{ items.1.6 }}</td>
        </tr>
    {% endfor %}
    {% endif %}
    </tbody>
    </table>
</div>
           {% else %} 투자 의견이 없습니다.
    {% endif %}
{% block content3 %}



{% endblock %}

{% endblock %}

